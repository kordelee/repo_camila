<!DOCTYPE html>
<html lang="ko">
<div th:replace="~{usr/v1/mallbicycle/include/includeUsrHead :: includeUsrHead}"></div>

<body>

<!-- skippy -->
<a id="skippy" class="skippy visually-hidden-focusable overflow-hidden" href="#content">
    <div class="container">
        <span class="u-skiplink-text">Skip to main content</span>
    </div>
</a>
<!-- End skippy -->
<!-- Preload -->
<!--<div id="loading" class="loading-preloader">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
--><!-- End Preload -->

<!-- 
========================
    Wrapper 
========================
-->
<div class="wrapper">
    <!-- heder height -->
    <div class="header-height-bar"></div>
    
<!-- includeUsrGnb s -->
<div th:replace="~{usr/v1/infra/include/top :: top}"></div> 
<!-- includeUsrGnb e -->  

<!-- Main -->
        <main>
        
            <!-- Breadcrumb -->
            <div class="py-3 bg-gray-100">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6 my-2">
                            <h1 class="m-0 h4 text-center text-lg-start">비밀번호변경</h1>
                        </div>
                        <div class="col-lg-6 my-2">
                            <ol class="breadcrumb dark-link m-0 small justify-content-center justify-content-lg-end">
                                <li class="breadcrumb-item">My Page</a></li>
                                <li class="breadcrumb-item text-nowrap" aria-current="page">개인정보</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Breadcrumb -->
            
            <!-- Shop -->
            <section class="py-6">
                <div class="container">
                    <div class="row">

<!-- includeUsrLeft s -->
<div th:replace="~{usr/v1/mallbicycle/include/includeUsrLeftMypage :: includeUsrLeftMypage}"></div>
<!-- includeUsrLeft e -->    

						<!-- Product Box -->
						<div class="col-lg-8 col-xl-9">

<!-- <div id="lita"></div> -->		<!-- #-> -->  

<!-- Form Contents -->
<div class="shop-top-bar d-flex pb-3">
    <div class="layout-change">

        <!-- Mobile Toggle -->
        <button class="btn btn-sm d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#shop_filter" aria-controls="shop_filter">
            <i class="fs-4 lh-1 bi bi-justify-left"></i>
        </button>
        <!-- End Mobile Toggle -->
        
    </div>
</div>

<div class="row g-3">
	<div class="card mb-5">
		<div class="card-body p-4">
			<div class="row">
				<div class="col-sm-6 mb-3">
					<div class="form-group">
						<label for="ifmmPassword" class="form-label">비밀번호</label>
						<input type="password" id="ifmmPassword" class="form-control" name="ifmmPassword">
					</div>
				</div>
				<div class="col-sm-6 mb-3">
				</div>				
				<div class="col-sm-6 mb-3">
					<div class="form-group">
						<label for="ifmmPasswordCk" class="form-label">비밀번호확인</label>
						<input type="password" id="ifmmPasswordCk" class="form-control" name="ifmmPasswordCk">
					</div>
				</div>
				<!--<div class="col-sm-6 mb-3">
					<div class="form-group">
						<label for="xPasswordNew2" class="form-label">Retype new password</label>
						<input type="password" id="xPasswordNew2" class="form-control" name="xPasswordNew2">
					</div>
				</div>-->
				<!--<div class="col-12 pt-2" id="resultChangePwd">
					 <span class="text-muted">일치하는 정보가 없습니다.</span> 
				</div>-->				
				<div class="col-12 pt-2">
					<button class="btn btn-primary" id="btnChangePwd">
						비밀번호 변경
					</button>
				</div>
			</div>
		</div>
	</div>                            
</div>
<!-- Form Contents -->
                            
                        </div>
                        <!-- End Product Box -->
                    </div>
                </div>
            </section>
            <!-- End Shop -->
      
        </main>
        <!-- End Main -->
    
<!-- includeUsrFooter s -->
<div th:replace="~{usr/v1/mallbicycle/include/includeUsrFooter :: includeUsrFooter}"></div>
<!-- includeUsrFooter e -->   

</div>
<!-- 
========================
    End Wrapper 
========================
-->
<!-- includeUsrLinkJs s -->
<div th:replace="~{usr/v1/mallbicycle/include/includeUsrLinkJs :: includeUsrLinkJs}"></div>
<!-- includeUsrLinkJs e -->

<!--<script type="text/javascript">

$("#btnChangePwd").on("click", function(){
	if(validationFindId() == false) return false;
	
	$.ajax({
		async: true 
		,cache: false
		,type: "post"
		/* ,dataType:"json" */
		,url: "/v1/infra/member/changePwdUsrProc"
		/* ,data : $("#formLogin").serialize() */
		,data : { "ifmmId" : "<c:out value="${sessUsrId }"/>", "ifmmPassword" : $("#xPasswordOld").val(), "xPasswordNew" : $("#xPasswordNew").val()}
		,success: function(response) {
			if(response.rt == "success") {
				location.href = "/v1/infra/member/loginUsrForm";
			} else {
				$("#resultChangePwd").empty();
				
				var resultDiv = '';
				resultDiv += '<span class="text-muted">';
				resultDiv += 'Old password 와 일치하는 정보가 없습니다.';	
				resultDiv += '</span>';
				
				$("#resultChangePwd").append(resultDiv);
			}
		}
		,error : function(jqXHR, textStatus, errorThrown){
			alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
		}
	});
});


validationFindId = function() {
	
	// 구 패스워드와 신패스워트 일치여부
	// 신패스워트1가 신패스워트2 일치여부

}
</script>-->

<script>
		
			document.getElementById("btnChangePwd").onclick = function(){
				let pwd = document.getElementById("ifmmPassword").value;
				let pwdCk = document.getElementById("ifmmPasswordCk").value;
				if(pwd == pwdCk){
					$.ajax({
						async: true 
						,cache: false
						,type: "post"
						/* ,dataType:"json" */
						,url: "/v1/infra/member/changPwdUsrProc"
						/* ,data : $("#formLogin").serialize() */
						,data : {"ifmmPassword" : $("#ifmmPassword").val()}
						,success: function(response) {
							if(response.rt == "success") {
								location.href = "/v1/infra/member/signinUsrForm"
							} else {
	//							by pass
							}
						}
						,error : function(jqXHR, textStatus, errorThrown){
							alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
						}
					});
				} else {
					alert("비밀번호가 일치하지 않습니다.");
				}
			}
		
			
			
	</script>
	
</body>

</html>